<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html>
<head>

<title>MPATE-GE 2618 Final Project</title>

<link href="mfbasic.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="top"></div>
<div id="container">
<div id="content">

<!--Do not edit anything above this-->

<h1>VinylVisualizer</h1>
<h2>Harrison Zafrin</h2>

<p>Download/Read the Code:
<a href="https://github.com/bombsandbottles/VinylVisualizer">On Github</a>

<h3>Visualization:<h3>
<img src="images/example3.png"></img>

<h3>About:</h3>

<p>The main goal behind my project was to create an interactive music visualizer
with realtime audio effects.  The projects name is a play on the shape of the visualization
and of its realtime audio effects "variable speed replay". In addition to variable speed replay,
2-Pole Lowpass and Highpass IIR Filters are also implemented.  I wanted to incorporate
an "easier" DSP effect outside of MATLAB to get a lower level understanding of what was
actually going on.</p>

<p>The program uses Libsndfile to read an audio track chunk by chunk into an input buffer
inside of Port Audios callback function.  Once inside the callback function, the filled 
input buffer is passed serially to a chain of audio effects.  The first effect in the chain
is a Sample Rate Converter handled by Libsamplerates src_process function.  Because Port Audios
output sampling rate is static, the interpolation and decimation that is computed by src_process
causes a variable speed playback effect akin to a Vinyl Player.</p>

<pre>   
/* This if Statement Ensures Smooth VariSpeed Output */
    if (fmod((double)framesPerBuffer, data->src_data.src_ratio) == 0)
    {
    	numInFrames = framesPerBuffer;
    }
    else
    	numInFrames = (framesPerBuffer/data->src_data.src_ratio) + 2;

/* Read FramesPerBuffer Amount of Data from inFile into buffer[] */
numberOfFrames = sf_readf_float(data->inFile, data->src_inBuffer, numInFrames);
</pre>

<p>For example in the code above, if our framesPerBuffer is 1024,
our src_ratio is 2 and our output_frames to be generated is 1024, we pass
512 frames into src_process to interpolate 512 more frames, ensuring a slowdown
variable speed playback effect.</p>

<p>Post src_process, the effected audio is then passed to Lowpass and Highpass functions 
with variable frequency and resonance. The audio is then passed one more time to an 
anti-clipping function to prevent distortion from high resonance values generated by the filters.</p>

<p>For the visuals, the effected audio is passed to a visual buffer to dynamically change the 
visualization. Right now, color values, scaling, and modulation on the z-axis are all effected by 
the incoming audio samples amplitude values.  The goal once again was to create a visualizaton of 
a "disc", however more than one person has told me it looks like a donut.</p>

<h3>Installation:</h3>

<p>The code which can be downloaded from the Github link above comes with a makefile
which can be executed via the command line with a simple "make" command.  As long
as the dependencies listed below are installed there should be no problem.</p>

<h4>Required Dependencies:</h4> 
<ol>
	<li>Port Audio
	<li>Libsndfile
	<li>Libsamplerate
	<li>OpenGL
</ol>

<h3>Usage:</h3> 
<pre>    
<b>./VinylVisualizer &lt;soundfile&gt;</b>
'f'   - Toggle Fullscreen 
'j/k' - Increase/Decrease LPF Freq. Cutoff by 100hz 
'i/o' - Increase/Decrease LPF Resonance by 1.0 Q Factor 
's/d' - Increase/Decrease HPF Freq. Cutoff by 100hz 
'w/e' - Increase/Decrease HPF Resonance by 1.0 Q Factor 
'-/=' - Increase/Decrease Speed/Pitch 
'm'   - To Mute Output Audio 
'r'   - Reset All Parameters 
'CURSOR ARROWS' - Rotate Visuals 
'q'   - Quit 
</pre>

<h3>CLI GUI:<h3>
<img src="images/example2.png"></img>

<h3>Future Plans:</h3>

<p>I plan to continue working on the VinylVisualizer in my spare time incorporating more
audio effects into the signal processing chain.  I also tried to incorporate frequency
dependent visual changes based on FFTs, however the visual results were not as aesthetically
interesting as the current implementation.</p>


<!--Don't edit anything below here-->
</div>
<div id="footer">MPATE-GE 2618 C Programming for Music Technology Final Project</div>

</div>
</body>
</html>
